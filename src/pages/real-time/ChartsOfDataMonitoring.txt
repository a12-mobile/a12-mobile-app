<template>
    <div id="chartsOfDataMonitoring">
        <!--头部-->
        <div class="row" style="text-align: center;height: 50px;">
            <i class="fa fa-arrow-left" style="left: 10px;position: absolute;line-height: 50px;font-size: 20px;" onclick="back()"></i>
            <i class="fa fa-fa-refresh" style="left: 10px;position: absolute;line-height: 50px;font-size: 20px;"></i>
            <span style="color: white;padding: 0px 20px 0px 20px;line-height: 50px;font-size: 20px;font-weight: 100;">实时数据监测</span>
            <span style="font-size: 12px;color: black;" hidden id="width_temp">10:31</span>
        </div>
        <div id="myCarousel" class="carousel slide" data-interval="false">
            <div class="carousel-inner">
                <!--曲线显示部分-->
                <div class="item active">
                    <!--曲线监测页面头部-->
                    <div class="row" style="height: 80px;">
                        <!--日期显示-->
                        <div style="text-align: center;height: 50px;position: relative;margin-left: auto;margin-right: auto;">
                            <span style="color: white;padding: 0px 20px 0px 20px;line-height: 50px;font-size: 20px;font-weight: 100;font-family: 'Microsoft YaHei UI'">
                                <i class="fa fa-chevron-left" id="dataTableExpand"></i>
                                    &nbsp;&nbsp;
                                <i class="fa fa-cog" id="btn_chartSetting" style="color: #3F4889"></i>
                                    &nbsp;&nbsp;<span id="chartDate">2018年5月14日,昼 </span>&nbsp;&nbsp;
                            <i class="fa fa-wrench" id="btn_calendarSetting" style="color: #3F4889"></i> &nbsp;&nbsp;
                            <i class="fa fa-chevron-right" id="dataTableClose"></i>
                            </span>
                        </div>
                        <!--时间段显示-->
                        <div style="text-align: center">
                            <span style="font-size: 15px;font-weight: 100;font-family: 'Microsoft YaHei UI';color: #54FFFF;height: 30px;">
                                <span id="WellBore">当前井名</span>
                            </span>
                        </div>
                    </div>
                    <!--曲线的表头-->
                    <div class="row" style="color: #DDDDDD;" id="dataTable">
                        <div v-for="n in grid" :class="average" style="border-right: 1px solid gray;">
                            <div style="text-align: center;" class="lineSettingButton" v-for="(item,index) in items" v-bind:data-options="index" v-if="n==item.position&&item.display===true">
                                {{item.name}}<span v-if="item.unit != ''">[{{item.unit}}]</span>
                                <div style="width: 100%;height: 2px;" v-bind:style="{backgroundColor:item.color}"></div>
                                <div class="row" style="font-size: 12px;">
                                    <div class="col-xs-4" style="padding: 0px;">
                                        {{item.limit_min}}
                                    </div>
                                    <div class="col-xs-4" style="padding: 0px;">
                                        {{item.current.toFixed(2)}}
                                    </div>
                                    <div class="col-xs-4" style="padding: 0px;">
                                        {{item.limit_max}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--曲线监测部分-->
                    <div class="row" id="charts" style="margin-left: 0px;margin-right: 0px;">
                        <p class="hidden">{{chartCount}}</p>
                        <div class="" style="width:100%;height: 500px;" id="distChart"></div>
                    </div>
                </div>
                <!--曲线设置部分-->
                <div class="item">
                    <div class="row" id="vue">
                        <!--数据列表页面的数据项-->
                        <div class="col-sm-6 col-xs-6   small-padding lineSettingButton" v-for="(item,index) in items" v-bind:data-options="index">
                            <div style="text-align: center;color: white;" class="block">
                                <p style="font-size: 30px;padding-top: 15px;margin-bottom: 0px;"><i class="fa fa-cog"></i>
                                </p>
                                <div style="float: left;font-size: 13px;padding-left: 10px;">
                                    {{item.name}}
                                </div>
                            </div>
                        </div>
                        <!--数据列表块的添加项（加号）-->
                        <div class="col-sm-6 col-xs-6 small-padding lineSettingButton">
                            <div style="text-align: center;color: white;" class="block">
                                <p style="font-size: 30px;padding-top: 15px;margin-bottom: 0px;"><i class="fa fa-plus-circle"></i></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--模块设置Modal-->
    <div class="modal fade" id="myModal" placement="auto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="myModalLabel" :data-options="item.index">
                        <input v-if="temp.name === null" type="text" class="form-control" placeholder="请输入新数据项名称" v-model="item.name" />
                        <span v-else>{{item.name}}</span>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" v-if="temp.name ===null">
                        <label for="bottom" class="col-xs-4 col-sm-4 control-label">id</label>
                        <div class="col-xs-8 col-sm-8">
                            <input type="text" class="form-control" id="id" placeholder="请输入id" v-model="item.id">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="color" class="col-xs-4 col-sm-4 control-label">曲线颜色</label>
                        <div class="col-xs-8 col-sm-8">
                            <input type="text" class="form-control" id="color" placeholder="请输入颜色" v-model="item.color">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bottom" class="col-xs-4 col-sm-4 control-label">阈值下限</label>
                        <div class="col-xs-8 col-sm-8">
                            <input type="text" class="form-control" id="bottom" placeholder="请输入下限" v-model="item.limit_min">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="top" class="col-xs-4 col-sm-4 control-label">阈值上限</label>
                        <div class="col-xs-8 col-sm-8">
                            <input type="text" class="form-control" id="top" placeholder="请输入上限" v-model="item.limit_max">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="top" class="col-xs-4 col-sm-4 control-label">显示位置</label>
                        <div class="col-xs-8 col-sm-8">
                            <select class="form-control" v-model="item.position">
                                <option v-for="index in length">{{index}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-4 col-xs-offset-4 col-sm-8 col-xs-8">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" v-model="item.display">是否显示
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary btn-sm" id="modalSubmitBtn">
                        <span v-if="temp.name === null">添加</span>
                        <span v-else>保存更改</span>
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!--chart设置Modal-->
    <div class="modal fade" id="chartSetModal" placement="auto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">图表显示设置</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="top" class="col-sm-4 col-xs-4 control-label">显示数量</label>
                        <div class="col-sm-8 col-xs-8">
                            <input type="text" class="form-control" placeholder="请输入显示数量" v-model.number="count">
                        </div>
                    </div>
                    <div style="height: 200px;width: 100%;background-color: #31b0d5">
                        <div v-for="n in count" :class="average" style="border: 2px solid black;box-sizing: border-box;height: 200px;">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary btn-sm" id="btn_chartSettingSubmit">提交更改
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <div class="modal fade" id="wellBoreIdSet" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">当前选择井:<span id="selectWell" data-options="{{currentWellBoreId}}">{{currentWellName}}</span></h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="col-xs-8 col-sm-8">
                            <input type="text" class="form-control" id="wellName" placeholder="请输入井名">
                        </div>
                        <button type="button" class="btn btn-primary col-xs-4 col-sm-4" id="searchWell">搜索</button>
                    </div>
                    <table class="table table-condensed table-responsive" id="wellList">
                        <thead>
                            <tr>
                                <th class="center">编号</th>
                                <th class="left">井名</th>
                                <th class="left">在线状态</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="text-align: center;" v-for="(item,index) in list" v-bind:id="item.wellBoreId" v-bind:name="item.wellName" onclick="setTempWellConfg(this)">
                                <td>{{index}}</td>
                                <td class="left">{{item.wellName}}</td>
                                <td class="left" v-if="item.wellBoreStatus==1">在线</td>
                                <td class="left" v-if="item.wellBoreStatus==0">离线</td>
                            </tr>
                            <tr>
                                <td v-bind:data-options="pageCount-1<=1?1:pageCount-1" class="center" onclick="initWellList(this)"><button type="button" class="btn btn-primary">上一页</button></td>
                                <td class="center">{{pageCount}}/{{pages}}</td>
                                <td v-bind:data-options="pageCount+1>=pages?pages:pageCount+1" class="left" onclick="initWellList(this)"><button type="button" class="btn btn-primary">下一页</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" onclick="changeWellBore()">提交更改</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
    </div>
    </div>
</template>

<script>
    export default {
        data(){
            return{
                charts:"",                    //charts实例
                isChanged:false,              //是否发生了改变
                gridTop=50,                   //grid得top
                isDataZoomShow:false,         //dataZoom是否显示
                isDataZoomChange:true,        //dataZoom是否跟随更新值一起变动
                GRID_COUNT:2,                 //Grid得初始化数量
                yAxisData:[],                 //y坐标轴的数据，此数据跟随option的y轴数据一同变化。当曲线发生了不能融合性的变化后，需要初始化y轴的数据，此时y轴的数据可以直接从此变量获取
                isSendGetProperty:false,
                initSessionId:false,          //SESSIONID是否初始化
                NONE_DATA_MSG:"loading...",   //获取为空的数据显示的内容
                ITEM_INIT_MIN:0,              //item中默认初始最大值和最小值
                ITEM_INIT_MAX:50000,
                isItemInit:false,             //items是否初始化
                DEPTH_ID:8004,                //深度对应的id
                SOCKET_SESSION_ID:null,       //WebSocket SessionId
                SESSION_SPLIT:"%%%%",

                wellBoreId:"",                //获取参数传入的WellBoreId
                wellName:"",                  //获取参数传入的WellName
                WELLBORE_NAME_SPLIT = "&&&&",
                isWellInit:false,
                isSearch:false,
                BASE_URL:"http://1.85.51.153:7005/websocket",

            }
        },

        beforeMount(){
            $(".container").css("min-height",window.innerHeight)
            
        },





        
    }
</script>

<style lang="scss" scoped>
    #chartsOfDataMonitoring {}
    .hidden {
        display: none;
    }
    hr {
        margin: 3px;
    }
    html {
        font-size: 10px;
    }
    .form-group {
        height: 40px;
    }
    .block {
        background-color: rgba(64, 75, 139, 0.3);
        /*background-color: #3F4889;*/
        height: 80px;
        transition: all 0.2s ease;
    }
    .block:hover {
        border: 1px solid;
        border-color: white;
        box-shadow: 0px 0px 10px 5px #aaa;
    }
    .small-padding {
        padding-left: 5px !important;
        padding-right: 5px !important;
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .center {
        text-align: center;
    }
    .left {
        text-align: left;
    }
    .container {
        background: linear-gradient(#0C0D12, #3F4889);
    }
</style>


